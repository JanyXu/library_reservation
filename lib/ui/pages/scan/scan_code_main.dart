import 'package:flutter/material.dart';import 'package:flutter/services.dart';import 'package:images_picker/images_picker.dart';import 'package:library_reservation/core/service/config/api_config.dart';import 'package:library_reservation/core/service/network/network.dart';import 'package:library_reservation/ui/pages/scan/scan_page.dart';import 'package:scan/scan.dart';class SCMainPage extends StatelessWidget {  static const String routeString = '/';  const SCMainPage({Key? key}) : super(key: key);  @override  Widget build(BuildContext context) {    _getCategoryData();    return Scaffold(      appBar: AppBar(        title: Text('扫码助手'),      ),      body: Center(        child: MyScanApp(),      ),    );  }  static Future<dynamic> _getCategoryData() async{    Map<String, dynamic> map = {};    final result = await HttpUtil.instance.get(      ApiConfig.category,      parameters: map    );    print(result);    return result;  }}class MyScanApp extends StatefulWidget {@override_MyAppState createState() => _MyAppState();}class _MyAppState extends State<MyScanApp> {  String _platformVersion = 'Unknown';  String qrcode = 'Unknown';  @override  void initState() {    super.initState();    initPlatformState();  }  Future<void> initPlatformState() async {    String platformVersion;    try {      platformVersion = await Scan.platformVersion;    } on PlatformException {      platformVersion = 'Failed to get platform version.';    }    if (!mounted) return;    setState(() {      _platformVersion = platformVersion;    });  }  @override  Widget build(BuildContext context) {    return MaterialApp(      initialRoute: '/',      routes: {        '/': (context) => Scaffold(          appBar: AppBar(            title: const Text('Plugin example app'),          ),          body: Column(            children: [              Text('Running on: $_platformVersion\n'),              Wrap(                children: [                  ElevatedButton(                    child: Text("parse from image"),                    onPressed: () async {                      print('dd1');                      List<Media>? res = await ImagesPicker.pick();                      print('dd2');                      if (res != null) {                        String? str = await Scan.parse(res[0].path);                        if (str != null) {                          setState(() {                            qrcode = str;                          });                        }                      } else {                        print('dd');                      }                    },                  ),                  ElevatedButton(                    child: Text('go scan page'),                    onPressed: () {                      print('dd3');                      Navigator.push(context,                          MaterialPageRoute(builder: (_) {                            return ScanPage();                          }));                    },                  ),                ],              ),              Text('scan result is $qrcode'),            ],          ),        ),      },    );  }}